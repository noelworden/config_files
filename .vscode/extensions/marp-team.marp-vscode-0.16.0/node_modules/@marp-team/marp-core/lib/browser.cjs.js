"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e="marpitSVGPolyfill:setZoomFactor,",t=Symbol();let o,r;function n(n){const i="object"==typeof n&&n.target||document,a="object"==typeof n?n.zoom:n;window[t]||(Object.defineProperty(window,t,{configurable:!0,value:!0}),window.addEventListener("message",({data:t,origin:o})=>{if(o===window.origin)try{if(t&&"string"==typeof t&&t.startsWith(e)){const[,e]=t.split(","),o=Number.parseFloat(e);Number.isNaN(o)||(r=o)}}catch(e){console.error(e)}}));let l=!1;Array.from(i.querySelectorAll("svg[data-marpit-svg]"),e=>{var t,n,i,s;e.style.transform||(e.style.transform="translateZ(0)");const c=a||r||e.currentScale||1;o!==c&&(o=c,l=c);const d=e.getBoundingClientRect(),{length:f}=e.children;for(let o=0;o<f;o+=1){const r=e.children[o],a=r.getScreenCTM();if(a){const e=null!==(n=null===(t=r.x)||void 0===t?void 0:t.baseVal.value)&&void 0!==n?n:0,o=null!==(s=null===(i=r.y)||void 0===i?void 0:i.baseVal.value)&&void 0!==s?s:0,l=r.firstChild,{style:f}=l;f.transformOrigin||(f.transformOrigin=`${-e}px ${-o}px`),f.transform=`scale(${c}) matrix(${a.a}, ${a.b}, ${a.c}, ${a.d}, ${a.e-d.left}, ${a.f-d.top}) translateZ(0.0001px)`}}}),!1!==l&&Array.from(i.querySelectorAll("iframe"),({contentWindow:t})=>{null==t||t.postMessage(`${e}${l}`,"null"===window.origin?"*":window.origin)})}o=1,r=void 0;const i=(e,t,o)=>{if(e.getAttribute(t)!==o)return e.setAttribute(t,o),!0};function a(e={}){const t="boolean"==typeof e?(e=>{const t=!e;return console.warn(`[DEPRECATION WARNING] Usage of observer() with boolean option has been deprecated. Please replace with the usage of option object: observer({ once: ${t?"true":"false"} }).`),{once:t}})(e):e,{once:o=!1,target:r=document}=t,a="Apple Computer, Inc."===navigator.vendor?[n]:[];let l=!o;const s=()=>{for(const e of a)e({target:r});!function(e=document){Array.from(e.querySelectorAll('svg[data-marp-fitting="svg"]'),e=>{var t;const o=e.firstChild,r=o.firstChild,{scrollWidth:n,scrollHeight:a}=r;let l,s=1;if(e.hasAttribute("data-marp-fitting-code")&&(l=null===(t=e.parentElement)||void 0===t?void 0:t.parentElement),e.hasAttribute("data-marp-fitting-math")&&(l=e.parentElement),l){const e=getComputedStyle(l),t=Math.ceil(l.clientWidth-parseFloat(e.paddingLeft||"0")-parseFloat(e.paddingRight||"0"));t&&(s=t)}const c=Math.max(n,s),d=Math.max(a,1),f=`0 0 ${c} ${d}`;i(o,"width",""+c),i(o,"height",""+d),i(e,"preserveAspectRatio",getComputedStyle(e).getPropertyValue("--preserve-aspect-ratio")||"xMinYMin meet"),i(e,"viewBox",f)&&e.classList.toggle("__reflow__")})}(r),l&&window.requestAnimationFrame(s)};return s(),()=>{l=!1}}const l=Symbol(),s=(e=document)=>{if("undefined"==typeof window)throw new Error("Marp Core's browser script is valid only in browser context.");if(e[l])return e[l];const t=a({target:e}),o=()=>{t(),delete e[l]};return Object.defineProperty(e,l,{configurable:!0,value:o}),o};exports.browser=s,exports.default=s,exports.observer=a;
